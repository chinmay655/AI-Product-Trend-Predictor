{"ast":null,"code":"// frontend/src/api.js\nimport axios from 'axios';\n\n// Base URL of your Flask backend\nconst API_BASE_URL = 'http://127.0.0.1:5000/api';\n\n/**\n * Fetches product trend predictions from Flask backend\n * (works with both dummy & real Flipkart dataset)\n */\nexport const fetchTrends = async () => {\n  try {\n    const response = await axios.get(`${API_BASE_URL}/predict`, {\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      timeout: 10000\n    });\n    let data = response.data || {};\n\n    // ✅ Clean and format predictions\n    if (data.predictions) {\n      const cleanedPredictions = {};\n      for (const [key, value] of Object.entries(data.predictions)) {\n        // Remove URLs, HTML tags, and weird long texts\n        const cleanKey = key.replace(/https?:\\/\\/[^\\s]+/g, '') // remove URLs\n        .replace(/<[^>]*>/g, '') // remove HTML\n        .replace(/\\s+/g, ' ') // normalize spaces\n        .trim();\n\n        // Keep only if name looks valid\n        if (cleanKey && cleanKey.length > 2 && cleanKey.length < 100) {\n          cleanedPredictions[cleanKey] = value;\n        }\n      }\n      data.predictions = cleanedPredictions;\n    }\n\n    // ✅ Fallbacks to avoid “undefined” errors\n    data.forecasts = data.forecasts || [];\n    data.sentiment = data.sentiment || {\n      avg: 0,\n      total_analyzed: 0\n    };\n    data.wordCloudData = data.wordCloudData || [];\n    return data;\n  } catch (error) {\n    var _error$response, _error$response2;\n    // More detailed logging for debugging\n    console.error('❌ fetchTrends error:', {\n      message: error.message,\n      code: error.code,\n      status: (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status,\n      responseData: (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data\n    });\n\n    // Helpful UI alert\n    if (error.code === 'ECONNABORTED') {\n      alert('Request timed out. Backend may be slow.');\n    } else if (!error.response) {\n      alert('Cannot connect to backend. Make sure Flask is running on http://127.0.0.1:5000');\n    } else {\n      alert(`Backend error: ${error.response.status} — ${JSON.stringify(error.response.data)}`);\n    }\n    return null;\n  }\n};\n\n/**\n * (Optional) Fetch detailed product info later if needed\n */\nexport const fetchProductDetails = async productName => {\n  try {\n    const response = await axios.get(`${API_BASE_URL}/product/${productName}`);\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching product details:', error);\n    return null;\n  }\n};","map":{"version":3,"names":["axios","API_BASE_URL","fetchTrends","response","get","headers","timeout","data","predictions","cleanedPredictions","key","value","Object","entries","cleanKey","replace","trim","length","forecasts","sentiment","avg","total_analyzed","wordCloudData","error","_error$response","_error$response2","console","message","code","status","responseData","alert","JSON","stringify","fetchProductDetails","productName"],"sources":["E:/wroking PROJECTS/ML Projects/AI-product-trend-predictor/frontend/src/api.js"],"sourcesContent":["// frontend/src/api.js\nimport axios from 'axios';\n\n// Base URL of your Flask backend\nconst API_BASE_URL = 'http://127.0.0.1:5000/api';\n\n/**\n * Fetches product trend predictions from Flask backend\n * (works with both dummy & real Flipkart dataset)\n */\nexport const fetchTrends = async () => {\n  try {\n    const response = await axios.get(`${API_BASE_URL}/predict`, {\n      headers: { 'Content-Type': 'application/json' },\n      timeout: 10000,\n    });\n\n    let data = response.data || {};\n\n    // ✅ Clean and format predictions\n    if (data.predictions) {\n      const cleanedPredictions = {};\n      for (const [key, value] of Object.entries(data.predictions)) {\n        // Remove URLs, HTML tags, and weird long texts\n        const cleanKey = key\n          .replace(/https?:\\/\\/[^\\s]+/g, '') // remove URLs\n          .replace(/<[^>]*>/g, '')           // remove HTML\n          .replace(/\\s+/g, ' ')              // normalize spaces\n          .trim();\n\n        // Keep only if name looks valid\n        if (cleanKey && cleanKey.length > 2 && cleanKey.length < 100) {\n          cleanedPredictions[cleanKey] = value;\n        }\n      }\n      data.predictions = cleanedPredictions;\n    }\n\n    // ✅ Fallbacks to avoid “undefined” errors\n    data.forecasts = data.forecasts || [];\n    data.sentiment = data.sentiment || { avg: 0, total_analyzed: 0 };\n    data.wordCloudData = data.wordCloudData || [];\n\n    return data;\n\n  } catch (error) {\n    // More detailed logging for debugging\n    console.error('❌ fetchTrends error:', {\n      message: error.message,\n      code: error.code,\n      status: error.response?.status,\n      responseData: error.response?.data,\n    });\n\n    // Helpful UI alert\n    if (error.code === 'ECONNABORTED') {\n      alert('Request timed out. Backend may be slow.');\n    } else if (!error.response) {\n      alert('Cannot connect to backend. Make sure Flask is running on http://127.0.0.1:5000');\n    } else {\n      alert(`Backend error: ${error.response.status} — ${JSON.stringify(error.response.data)}`);\n    }\n\n    return null;\n  }\n};\n\n/**\n * (Optional) Fetch detailed product info later if needed\n */\nexport const fetchProductDetails = async (productName) => {\n  try {\n    const response = await axios.get(`${API_BASE_URL}/product/${productName}`);\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching product details:', error);\n    return null;\n  }\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}